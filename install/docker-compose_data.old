
  data-be-analyse-1m-short1:
    container_name: data-be-analyse-1m-short1
    hostname: data-be-analyse-1m-short1
    image: amrox/greencandle:${TAG}
    mem_limit: 500m
    pull_policy: always
    restart: always
    entrypoint: /docker-entrypoint.sh "analyse_data"
    logging:
      driver: journald
    links:
      - data-be-api-router:router
      - data-base-mysql:mysql
      - data-base-redis:redis
    depends_on:
      - data-base-mysql
      - data-base-redis
      - data-be-get3_1m
    environment:
      - VPN_IP=$VPN_IP
      - ALERT=True
      - CONFIG_ENV=data/be/short/short1/1m
      - DB=true
      - CHECK_REDIS_PAIR=4
      - ROUTER_FORWARD=True
    healthcheck:
      test: find /var/local/  -mmin -2 -name greencandle 2>&1 |grep -q greencandle ||exit 1
      start_period: 1h
      interval: 1m
      timeout: 10s
      retries: 5
    volumes:
      - /data:/data
      - /root/.aws:/root/.aws
      - /dev/log:/dev/log
      - /var/run/:/var/run

  data-be-analyse-1m-long1:
    container_name: data-be-analyse-1m-long1
    hostname: data-be-analyse-1m-long1
    image: amrox/greencandle:${TAG}
    mem_limit: 500m
    pull_policy: always
    restart: always
    entrypoint: /docker-entrypoint.sh "analyse_data"
    logging:
      driver: journald
    links:
      - data-be-api-router:router
      - data-base-mysql:mysql
      - data-base-redis:redis
    depends_on:
      - data-base-mysql
      - data-base-redis
      - data-be-get3_1m
    environment:
      - VPN_IP=$VPN_IP
      - ALERT=True
      - CONFIG_ENV=data/be/long/long1/1m
      - DB=true
      - CHECK_REDIS_PAIR=4
      - ROUTER_FORWARD=True
    healthcheck:
      test: find /var/local/  -mmin -2 -name greencandle 2>&1 |grep -q greencandle ||exit 1
      start_period: 1h
      interval: 1m
      timeout: 10s
      retries: 5
    volumes:
      - /data:/data
      - /root/.aws:/root/.aws
      - /dev/log:/dev/log
      - /var/run/:/var/run

  data-be-analyse-5m-short1:
    container_name: data-be-analyse-5m-short1
    hostname: data-be-analyse-5m-short1
    image: amrox/greencandle:${TAG}
    mem_limit: 500m
    pull_policy: always
    restart: always
    entrypoint: /docker-entrypoint.sh "analyse_data"
    logging:
      driver: journald
    links:
      - data-be-api-router:router
      - data-base-mysql:mysql
      - data-base-redis:redis
    depends_on:
      - data-base-mysql
      - data-base-redis
      - data-be-get_5m
    environment:
      - VPN_IP=$VPN_IP
      - ALERT=True
      - CONFIG_ENV=data/be/short/short1/5m
      - DB=true
      - CHECK_REDIS_PAIR=4
      - ROUTER_FORWARD=True
    healthcheck:
      test: find /var/local/  -mmin -2 -name greencandle 2>&1 |grep -q greencandle ||exit 1
      start_period: 1h
      interval: 1m
      timeout: 10s
      retries: 5
    volumes:
      - /data:/data
      - /root/.aws:/root/.aws
      - /dev/log:/dev/log
      - /var/run/:/var/run

  data-be-analyse-5m-long1:
    container_name: data-be-analyse-5m-long1
    hostname: data-be-analyse-5m-long1
    image: amrox/greencandle:${TAG}
    mem_limit: 500m
    pull_policy: always
    restart: always
    entrypoint: /docker-entrypoint.sh "analyse_data"
    logging:
      driver: journald
    links:
      - data-be-api-router:router
      - data-base-mysql:mysql
      - data-base-redis:redis
    depends_on:
      - data-base-mysql
      - data-base-redis
      - data-be-get_5m
    environment:
      - VPN_IP=$VPN_IP
      - ALERT=True
      - CONFIG_ENV=data/be/long/long1/5m
      - DB=true
      - CHECK_REDIS_PAIR=4
      - ROUTER_FORWARD=True
    healthcheck:
      test: find /var/local/  -mmin -2 -name greencandle 2>&1 |grep -q greencandle ||exit 1
      start_period: 1h
      interval: 1m
      timeout: 10s
      retries: 5
    volumes:
      - /data:/data
      - /root/.aws:/root/.aws
      - /dev/log:/dev/log
      - /var/run/:/var/run

  data-be-analyse-1h-short1:
    container_name: data-be-analyse-1h-short1
    hostname: data-be-analyse-1h-short1
    image: amrox/greencandle:${TAG}
    mem_limit: 500m
    pull_policy: always
    restart: always
    entrypoint: /docker-entrypoint.sh "analyse_data"
    logging:
      driver: journald
    links:
      - data-be-api-router:router
      - data-base-mysql:mysql
      - data-base-redis:redis
    depends_on:
      - data-base-mysql
      - data-base-redis
      - data-be-get_1h
    environment:
      - VPN_IP=$VPN_IP
      - ALERT=True
      - CONFIG_ENV=data/be/short/short1/1h
      - DB=true
      - CHECK_REDIS_PAIR=4
      - ROUTER_FORWARD=True
    healthcheck:
      test: find /var/local/  -mmin -2 -name greencandle 2>&1 |grep -q greencandle ||exit 1
      start_period: 1h
      interval: 1m
      timeout: 10s
      retries: 5
    volumes:
      - /data:/data
      - /root/.aws:/root/.aws
      - /dev/log:/dev/log
      - /var/run/:/var/run

  data-be-analyse-1h-long1:
    container_name: data-be-analyse-1h-long1
    hostname: data-be-analyse-1h-long1
    image: amrox/greencandle:${TAG}
    mem_limit: 500m
    pull_policy: always
    restart: always
    entrypoint: /docker-entrypoint.sh "analyse_data"
    logging:
      driver: journald
    links:
      - data-be-api-router:router
      - data-base-mysql:mysql
      - data-base-redis:redis
    depends_on:
      - data-base-mysql
      - data-base-redis
      - data-be-get_1h
    environment:
      - VPN_IP=$VPN_IP
      - ALERT=True
      - CONFIG_ENV=data/be/long/long1/1h
      - DB=true
      - CHECK_REDIS_PAIR=4
      - ROUTER_FORWARD=True
    healthcheck:
      test: find /var/local/  -mmin -2 -name greencandle 2>&1 |grep -q greencandle ||exit 1
      start_period: 1h
      interval: 1m
      timeout: 10s
      retries: 5
    volumes:
      - /data:/data
      - /root/.aws:/root/.aws
      - /dev/log:/dev/log
      - /var/run/:/var/run

  data-be-analyse-4h-short1:
    container_name: data-be-analyse-4h-short1
    hostname: data-be-analyse-4h-short1
    image: amrox/greencandle:${TAG}
    mem_limit: 500m
    pull_policy: always
    restart: always
    entrypoint: /docker-entrypoint.sh "analyse_data"
    logging:
      driver: journald
    links:
      - data-be-api-router:router
      - data-base-mysql:mysql
      - data-base-redis:redis
    depends_on:
      - data-base-mysql
      - data-base-redis
      - data-be-get_4h
    environment:
      - VPN_IP=$VPN_IP
      - ALERT=True
      - CONFIG_ENV=data/be/short/short1/4h
      - DB=true
      - CHECK_REDIS_PAIR=4
      - ROUTER_FORWARD=True
    healthcheck:
      test: find /var/local/  -mmin -15 -name greencandle 2>&1 |grep -q greencandle ||exit 1
      start_period: 1h
      interval: 30m
      timeout: 10s
      retries: 5
    volumes:
      - /data:/data
      - /root/.aws:/root/.aws
      - /dev/log:/dev/log
      - /var/run/:/var/run

  data-be-analyse-4h-long1:
    container_name: data-be-analyse-4h-long1
    hostname: data-be-analyse-4h-long1
    image: amrox/greencandle:${TAG}
    mem_limit: 500m
    pull_policy: always
    restart: always
    entrypoint: /docker-entrypoint.sh "analyse_data"
    logging:
      driver: journald
    links:
      - data-be-api-router:router
      - data-base-mysql:mysql
      - data-base-redis:redis
    depends_on:
      - data-base-mysql
      - data-base-redis
      - data-be-get_4h
    environment:
      - VPN_IP=$VPN_IP
      - ALERT=True
      - CONFIG_ENV=data/be/long/long1/4h
      - DB=true
      - CHECK_REDIS_PAIR=4
      - ROUTER_FORWARD=True
    healthcheck:
      test: find /var/local/  -mmin -15 -name greencandle 2>&1 |grep -q greencandle ||exit 1
      start_period: 1h
      interval: 30m
      timeout: 10s
      retries: 5
    volumes:
      - /data:/data
      - /root/.aws:/root/.aws
      - /dev/log:/dev/log
      - /var/run/:/var/run

  data-be-analyse-12h-short1:
    container_name: data-be-analyse-12h-short1
    hostname: data-be-analyse-12h-short1
    image: amrox/greencandle:${TAG}
    mem_limit: 500m
    pull_policy: always
    restart: always
    entrypoint: /docker-entrypoint.sh "analyse_data"
    logging:
      driver: journald
    links:
      - data-be-api-router:router
      - data-base-mysql:mysql
      - data-base-redis:redis
    depends_on:
      - data-base-mysql
      - data-base-redis
      - data-be-get_12h
    environment:
      - VPN_IP=$VPN_IP
      - ALERT=True
      - CONFIG_ENV=data/be/short/short1/12h
      - DB=true
      - CHECK_REDIS_PAIR=4
      - ROUTER_FORWARD=True
    healthcheck:
      test: find /var/local/  -mmin -15 -name greencandle 2>&1 |grep -q greencandle ||exit 1
      start_period: 1h
      interval: 30m
      timeout: 10s
      retries: 5
    volumes:
      - /data:/data
      - /root/.aws:/root/.aws
      - /dev/log:/dev/log
      - /var/run/:/var/run

  data-be-analyse-12h-long1:
    container_name: data-be-analyse-12h-long1
    hostname: data-be-analyse-12h-long1
    image: amrox/greencandle:${TAG}
    mem_limit: 500m
    pull_policy: always
    restart: always
    entrypoint: /docker-entrypoint.sh "analyse_data"
    logging:
      driver: journald
    links:
      - data-be-api-router:router
      - data-base-mysql:mysql
      - data-base-redis:redis
    depends_on:
      - data-base-mysql
      - data-base-redis
      - data-be-get_12h
    environment:
      - VPN_IP=$VPN_IP
      - ALERT=True
      - CONFIG_ENV=data/be/long/long1/12h
      - DB=true
      - CHECK_REDIS_PAIR=4
      - ROUTER_FORWARD=True
    healthcheck:
      test: find /var/local/  -mmin -15 -name greencandle 2>&1 |grep -q greencandle ||exit 1
      start_period: 1h
      interval: 30m
      timeout: 10s
      retries: 5
    volumes:
      - /data:/data
      - /root/.aws:/root/.aws
      - /dev/log:/dev/log
      - /var/run/:/var/run

